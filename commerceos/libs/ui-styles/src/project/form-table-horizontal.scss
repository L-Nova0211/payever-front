//
// Form Table Dark
// ----------------------------
$field-height: $grid-unit-y + 6;
.pe-bootstrap {

  .form-table {
    margin-bottom: 0;

    // flex fieldsets and reset bootstrap compression
    &-horizontal {
      @include pe_flexbox;
      @include pe_align-items(center);

      .row {
        padding: 0;
        margin: 0;
      }

      .mat-raised-button {
        margin-right: 12px;
      }

      .row > [class*=col] {
        margin: 0;
        padding-left: 0;
        padding-right: 12px;
      }

      label {
        margin-bottom: 0;
      }

      > .mat-divider-vertical {
        margin-right: $grid-unit-x;
        color: $color-white-grey-3;
      }
    }

    .form-fieldset-horizontal-label {
      font-size: $font-size-micro-1;
      color: $color-white-grey-3;
      margin-right: $grid-unit-x;
      line-height: $field-height;

      &-navbar {
        margin-right: ceil($grid-unit-x / 2);
      }
    }

    .form-fieldset.form-fieldset-horizontal {
      margin-bottom: 1px;
      padding: 0;

      .col-xs-0 {
        display: inline-block;
        position: relative;
      }

      .row > [class*=col] {
        min-height: $field-height;
        color: $color-white-grey-7;

        &:first-child .mat-form-field-wrapper {
          border-top-left-radius: $border-radius-base;
          border-top-right-radius: $border-radius-base;
        }

        &:last-child .mat-form-field-wrapper {
          border-bottom-left-radius: $border-radius-base;
          border-bottom-right-radius: $border-radius-base;
        }

        .mat-form-field {
          font-size: $font-size-micro-2;

          &.mat-form-field-invalid .mat-form-field-subscript-wrapper {
            top: 0;
            left: ceil($grid-unit-x / 2);
          }
        }

        .mat-form-field-wrapper {
          margin-left: 0;
          margin-right: 0;
          min-height: $field-height;
          line-height: $field-height;
          height: $field-height;
          padding: 0 $grid-unit-x - 5;
          border-radius: $border-radius-base;
          background-color: $color-grey-4;
          -webkit-font-smoothing: antialiased;
        }

        .mat-form-field-flex {
          min-height: $field-height;
        }

        .mat-form-field-label-wrapper {
          top: - floor($grid-unit-y / 2);

          .mat-form-field-label {
            color: $color-secondary-4;
          }
        }

        .mat-focused, .mat-form-field-should-float {
          .mat-form-field-label-wrapper {
            opacity: 0;
          }
        }

        &.col-xs-1, &.col-md-1, &.col-lg-1 {
          width: auto;
        }

        &:last-of-type {
          margin-right: 0;
        }

        &:first-child .mat-form-field-wrapper {
          border-top-left-radius: 4px;
          border-top-right-radius: 4px;
        }

        &:last-child .mat-form-field-wrapper {
          border-bottom-left-radius: 4px;
          border-bottom-right-radius: 4px;
        }

        .mat-form-field-label, .mat-input-element, .mat-select-value {
          color: $color-secondary-7;
          font-weight: $font-weight-regular;
          font-size: $font-size-micro-2;
          vertical-align: middle;
        }

        .mat-select-value {
          height: $field-height;
        }

        .mat-input-element {
          height: auto;
          line-height: $field-height; // for caret height in safari
        }

        .mat-form-field-infix {
          border-top-width: 0;
          padding-top: 0;
          width: ceil($grid-unit-x * 5) + 2;
          z-index: 1;
        }

        .mat-form-field-prefix {
          margin-right: 0;
        }

        .image-picker-container {
          border: none;
          height: $grid-unit-y * 5;
          min-width: $grid-unit-x * 12;

          .icon {
            color: $color-white-grey-9;
          }

          .image-picker-empty-icon, .mat-progress-spinner, mat-progress-spinner > svg {
            width: $icon-size-16 !important;
            height: $icon-size-16 !important;
          }

          .image-picker-delete {
            margin-right: 0;
          }
        }

        .image-picker-empty-label {
          margin-top: floor($grid-unit-y / 2);
          font-size: $font-size-micro-2;
          font-weight: $font-weight-light;
          color: $color-white-grey-9;
        }

        .image-picker {
          margin: 0;

          &-round .image-picker-container {
            min-width: $grid-unit-y * 5;
          }
        }

        @media (max-width: $viewport-breakpoint-xs-2 - 1) {
          .image-picker-round .image-picker-container {
            height: $grid-unit-y * 4;
            min-width: $grid-unit-y * 4;
          }
        }

        .mat-select-arrow:before {
          width: $grid-unit-x - 4;
          height: $grid-unit-y - 3;
          top: 50%;
          right: 1px;
        }

        .slider-wrapper {
          height: $field-height;

          &-label {
            color: $color-white-grey-3;
            font-size: $font-size-micro-2;
            margin-right: ceil($grid-unit-x / 6);
          }

          &-value {
            color: $color-white-grey-5;
            font-size: $font-size-micro-2;
            font-weight: $font-weight-regular;
            height: $grid-unit-y + $grid-unit-y - 5;
            min-width: ceil($grid-unit-x) * 3 + ceil($grid-unit-x / 3);
            border-radius: $border-radius-base;
            background-color: $color-grey-4;
            @include pe_flexbox;
            @include pe_align-items(center);
            @include pe_justify-content(center);
          }

          .mat-slider-wrapper {
            height: 1px;
            .mat-slider-track-wrapper {
              height: 1px;
              .mat-slider-track-background {
                height: 1px;
              }
              .mat-slider-track-fill {
                height: 1px;
                background-color: $color-grey-4;
              }
            }

            .mat-slider-thumb {
              width: $grid-unit-x - 2;
              height: $grid-unit-y - 1;
              bottom: - ceil($grid-unit-x / 2  - 1);
              right: - ceil($grid-unit-x / 2  - 1);
              background-color: $color-gray-4;
            }
          }
        }


        // checkbox
        //-----------
        .mat-checkbox {
          padding: 0;

          &-inner-container {
            margin: 0;
            width: $field-height;
            height: $field-height;
          }

          &-layout {
            margin-bottom: 0;
            @include pe_flexbox;
            @include pe_align-items(center);
          }

          &-frame {
            border-radius: 0;
            border: none;
          }

          &-background {
            background-color: $color-grey-4;
          }

          &-label {
            font-size: $font-size-micro-1;
            color: $color-white-grey-3;
            margin-right: $grid-unit-x;
            line-height: $field-height;
            white-space: nowrap;
          }
          &-checked .mat-checkbox-background .mat-checkbox-checkmark-path {
            stroke: $color-white-grey-7 !important;
          }
        }


        // textarea
        //-----------
        &.pe-textarea {
          border:none;

            &::-webkit-scrollbar {
              display: none;
            }

            .mat-form-field-label-wrapper {
              top: 0;
            }

            .mat-form-field-wrapper {
              height: auto;
              min-height: $grid-unit-y * 8;

            .mat-form-field-infix {
              padding: ceil($grid-unit-y / 2) 0;
            }

            textarea {
              min-height: ($grid-unit-y * 8) - 8px;

              &::-webkit-scrollbar {
                display: none;
              }
            }
          }
        }
      }

      &.form-fieldset-media-controls {

        .row > [class*=col] {
          margin-right: 0;
          line-height: 0;
        }
      }
    }
  }

  // Cdk-overlay
  // -----------------------

  .mat-select-horizontal {

    &.mat-select-panel {
      border-radius: $border-radius-base;

      .mat-select-content{
        background-color: $color-solid-grey-3;
      }

      .mat-option {
        line-height: $field-height * 2;
        height: 2em;
        font-size: $font-size-micro-2;
        padding: 0 ceil($grid-unit-x / 2);

        &.mat-selected:not(.mat-option-multiple) {
          background-color: $color-grey-4;
        }

        &:hover:not(.mat-option-disabled),
        &:focus:not(.mat-option-disabled) {
          background-color: $color-light-gray-hover-rgba;
        }

        &-text {
          font-size: $font-size-micro-2;
          line-height: $field-height;
        }
      }
    }
  }
}
